/*
 * Equinix Fabric API v4
 *
 * Contact: api-support@equinix.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package com.equinix.openapi.fabric.v4.api;

import com.equinix.openapi.fabric.v4.api.dto.port.PortDto;
import com.equinix.openapi.fabric.v4.model.AllPortsResponse;
import com.equinix.openapi.fabric.v4.model.Port;
import io.restassured.response.Response;
import org.apache.http.HttpStatus;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

/**
 * API tests for PortsApi
 */
public class PortsApiTest {

    private PortsApi api = TokenGenerator.getApiClient().ports();

    /**
     * Successful operation
     */
    @Test
    public void getPorts() {
        PortDto portDto = (PortDto) Utils.getEnvData(Utils.EnvVariable.QINQ_PORT);
        Response response = api.getPorts().nameQuery(portDto.getName()).execute(r -> r);
        Port port = response.as(AllPortsResponse.class).getData().get(0);
        assertEquals(HttpStatus.SC_OK, response.getStatusCode());
        assertEquals(port.getName(), portDto.getName());
        assertEquals(port.getUuid().toString(), portDto.getUuid());
    }
}
