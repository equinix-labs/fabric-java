/*
 * Equinix Fabric API v4
 *
 * Contact: api-support@equinix.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package com.equinix.openapi.fabric.v4.api;

import com.equinix.openapi.fabric.ApiException;
import com.equinix.openapi.fabric.v4.api.dto.users.UsersItem;
import com.equinix.openapi.fabric.v4.model.Metro;
import com.equinix.openapi.fabric.v4.model.MetroResponse;
import com.equinix.openapi.fabric.v4.model.Presence;
import org.junit.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * API tests for MetrosApi
 */
public class MetrosApiTest {

    private static final MetrosApi api = new MetrosApi(TokenGenerator.getApiClient(UsersItem.UserName.PANTHERS_FCR));
    private final String metroCode = "DC";

    @Test
    public void getMetroByCode() throws ApiException {
        Metro metro = api.getMetroByCode(metroCode);
        assertEquals(200, api.getApiClient().getStatusCode());
        assertEquals(metroCode, metro.getCode());
    }

    @Test
    public void getMetros() throws ApiException {
        MetroResponse metroResponse = api.getMetros(Presence.MY_PORTS, 1, 10);
        assertEquals(200, api.getApiClient().getStatusCode());
        boolean metroFound = metroResponse.getData().stream().anyMatch(metro -> metro.getCode().equals(metroCode));
        assertTrue(metroFound);
    }
}
